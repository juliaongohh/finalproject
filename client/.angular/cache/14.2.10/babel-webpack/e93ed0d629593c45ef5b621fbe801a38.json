{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../model/surveyTemplate.service\";\nimport * as i2 from \"../model/user.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/router\";\n\nfunction SurveyComponent_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 5);\n    i0.ɵɵelement(1, \"i\", 6);\n    i0.ɵɵtext(2, \" Add a Survey \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nconst _c0 = function (a1) {\n  return [\"./edit/\", a1];\n};\n\nfunction SurveyComponent_tr_14_button_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 13);\n    i0.ɵɵelement(1, \"i\", 14);\n    i0.ɵɵtext(2, \" Update \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const survey_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(1, _c0, survey_r2._id));\n  }\n}\n\nfunction SurveyComponent_tr_14_button_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function SurveyComponent_tr_14_button_8_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const survey_r2 = i0.ɵɵnextContext().$implicit;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.deleteSurvey(survey_r2));\n    });\n    i0.ɵɵelement(1, \"i\", 16);\n    i0.ɵɵtext(2, \" Delete \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nconst _c1 = function (a1) {\n  return [\"./report/\", a1];\n};\n\nfunction SurveyComponent_tr_14_button_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 17);\n    i0.ɵɵelement(1, \"i\", 18);\n    i0.ɵɵtext(2, \" Report \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const survey_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(1, _c1, survey_r2._id));\n  }\n}\n\nconst _c2 = function (a1) {\n  return [\"./respond/\", a1];\n};\n\nfunction SurveyComponent_tr_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 7);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 7);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtemplate(6, SurveyComponent_tr_14_button_6_Template, 3, 3, \"button\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtemplate(8, SurveyComponent_tr_14_button_8_Template, 3, 0, \"button\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\")(10, \"button\", 10);\n    i0.ɵɵelement(11, \"i\", 11);\n    i0.ɵɵtext(12, \" Respond \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵtemplate(14, SurveyComponent_tr_14_button_14_Template, 3, 3, \"button\", 12);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const survey_r2 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(survey_r2.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(survey_r2.authorName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.user && ctx_r1.user.id === survey_r2.userId);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.user && ctx_r1.user.id === survey_r2.userId);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(6, _c2, survey_r2._id));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.user && ctx_r1.user.id === survey_r2.userId);\n  }\n}\n\nexport let SurveyComponent = /*#__PURE__*/(() => {\n  class SurveyComponent {\n    constructor(repository, userService) {\n      this.repository = repository;\n      this.userService = userService;\n    }\n\n    ngOnInit() {\n      this.user = JSON.parse(localStorage.getItem('user'));\n      this.refresh();\n    }\n\n    deleteSurvey(surveyTemplate) {\n      this.repository.deleteSurveyTemplate(surveyTemplate).subscribe(data => this.refresh());\n    }\n\n    refresh() {\n      this.repository.getSurveyTemplates().subscribe(data => {\n        data.map(template => this.userService.getUser(template.userId).subscribe(author => template.authorName = author));\n        this.surveyTemplates = data;\n      });\n    }\n\n  }\n\n  SurveyComponent.ɵfac = function SurveyComponent_Factory(t) {\n    return new (t || SurveyComponent)(i0.ɵɵdirectiveInject(i1.SurveyTemplateRepository), i0.ɵɵdirectiveInject(i2.UserService));\n  };\n\n  SurveyComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SurveyComponent,\n    selectors: [[\"app-survey\"]],\n    decls: 15,\n    vars: 2,\n    consts: [[1, \"container\"], [\"class\", \"btn btn-primary m-1\", \"routerLink\", \"./add\", 4, \"ngIf\"], [1, \"table\", \"table-striped\", \"m-1\"], [\"scope\", \"col\"], [4, \"ngFor\", \"ngForOf\"], [\"routerLink\", \"./add\", 1, \"btn\", \"btn-primary\", \"m-1\"], [1, \"fas\", \"fa-plus-circle\"], [1, \"align-middle\"], [\"class\", \"btn btn-info btn-sm m-1\", 3, \"routerLink\", 4, \"ngIf\"], [\"class\", \"btn btn-danger btn-sm m-1\", 3, \"click\", 4, \"ngIf\"], [1, \"btn\", \"btn-success\", \"btn-sm\", \"m-1\", 3, \"routerLink\"], [1, \"fa-solid\", \"fa-reply\"], [\"class\", \"btn btn-secondary btn-sm m-1\", 3, \"routerLink\", 4, \"ngIf\"], [1, \"btn\", \"btn-info\", \"btn-sm\", \"m-1\", 3, \"routerLink\"], [1, \"fas\", \"fa-pencil-alt\"], [1, \"btn\", \"btn-danger\", \"btn-sm\", \"m-1\", 3, \"click\"], [1, \"fas\", \"fa-trash-alt\"], [1, \"btn\", \"btn-secondary\", \"btn-sm\", \"m-1\", 3, \"routerLink\"], [1, \"fa-solid\", \"fa-square-poll-vertical\"]],\n    template: function SurveyComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"main\", 0);\n        i0.ɵɵtemplate(1, SurveyComponent_button_1_Template, 3, 0, \"button\", 1);\n        i0.ɵɵelementStart(2, \"table\", 2)(3, \"thead\")(4, \"tr\")(5, \"th\", 3);\n        i0.ɵɵtext(6, \"Survey\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"th\", 3);\n        i0.ɵɵtext(8, \"Author\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(9, \"th\", 3)(10, \"th\", 3)(11, \"th\", 3)(12, \"th\", 3);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(13, \"tbody\");\n        i0.ɵɵtemplate(14, SurveyComponent_tr_14_Template, 15, 8, \"tr\", 4);\n        i0.ɵɵelementEnd()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.user);\n        i0.ɵɵadvance(13);\n        i0.ɵɵproperty(\"ngForOf\", ctx.surveyTemplates);\n      }\n    },\n    dependencies: [i3.NgForOf, i3.NgIf, i4.RouterLink]\n  });\n  return SurveyComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}