{"ast":null,"code":"import { SurveyTemplate } from 'src/app/model/surveyTemplate.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/model/surveyTemplate.service\";\nimport * as i2 from \"src/app/model/surveyResponse.service\";\nimport * as i3 from \"src/app/model/user.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\n\nfunction ReportComponent_th_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const question_r2 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", question_r2.questionText, \" \");\n  }\n}\n\nfunction ReportComponent_tr_13_td_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const question_r5 = ctx.$implicit;\n    const surveyResponse_r3 = i0.ɵɵnextContext().$implicit;\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r4.getUserResponse(surveyResponse_r3, question_r5._id), \" \");\n  }\n}\n\nfunction ReportComponent_tr_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, ReportComponent_tr_13_td_3_Template, 2, 1, \"td\", 4);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const surveyResponse_r3 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(surveyResponse_r3.displayName);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.survey.questions);\n  }\n}\n\nexport let ReportComponent = /*#__PURE__*/(() => {\n  class ReportComponent {\n    constructor(templateRepository, responseRepository, userService, route) {\n      this.templateRepository = templateRepository;\n      this.responseRepository = responseRepository;\n      this.userService = userService;\n      this.route = route;\n    }\n\n    ngOnInit() {\n      this.survey = new SurveyTemplate();\n      this.surveyResponses = [];\n      this.user = JSON.parse(localStorage.getItem('user'));\n      this.templateRepository.getSurveyTemplate(this.route.snapshot.paramMap.get('id')).subscribe(data => this.survey = data);\n      this.responseRepository.getResponses(this.route.snapshot.paramMap.get('id')).subscribe(data => {\n        data.map(surveyResponse => this.userService.getUser(surveyResponse.userId).subscribe(author => surveyResponse.displayName = author));\n        this.surveyResponses = data;\n      });\n    }\n\n    getUserResponse(surveyResponse, questionId) {\n      const response = surveyResponse.responses.find(response => response.questionId === questionId);\n      return response ? response.response : null;\n    }\n\n    print() {\n      window.print();\n    }\n\n  }\n\n  ReportComponent.ɵfac = function ReportComponent_Factory(t) {\n    return new (t || ReportComponent)(i0.ɵɵdirectiveInject(i1.SurveyTemplateRepository), i0.ɵɵdirectiveInject(i2.SurveyResponseRepository), i0.ɵɵdirectiveInject(i3.UserService), i0.ɵɵdirectiveInject(i4.ActivatedRoute));\n  };\n\n  ReportComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ReportComponent,\n    selectors: [[\"app-report\"]],\n    decls: 20,\n    vars: 4,\n    consts: [[1, \"container\"], [1, \"form-group\", \"p-2\"], [1, \"table\", \"table-bordered\", \"table-striped\", \"table-hover\"], [1, \"text-center\"], [4, \"ngFor\", \"ngForOf\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"fa-solid\", \"fa-print\"], [\"routerLink\", \"/survey\", 1, \"btn\", \"btn-warning\", \"m-2\"], [1, \"fas\", \"fa-undo\"]],\n    template: function ReportComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"main\", 0)(1, \"div\", 1)(2, \"h5\");\n        i0.ɵɵtext(3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"p\");\n        i0.ɵɵtext(5);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(6, \"table\", 2)(7, \"thead\")(8, \"tr\")(9, \"th\", 3);\n        i0.ɵɵtext(10, \"User\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(11, ReportComponent_th_11_Template, 2, 1, \"th\", 4);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(12, \"tbody\");\n        i0.ɵɵtemplate(13, ReportComponent_tr_13_Template, 4, 2, \"tr\", 4);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(14, \"button\", 5);\n        i0.ɵɵlistener(\"click\", function ReportComponent_Template_button_click_14_listener() {\n          return ctx.print();\n        });\n        i0.ɵɵelement(15, \"i\", 6);\n        i0.ɵɵtext(16, \" Print \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"button\", 7);\n        i0.ɵɵelement(18, \"i\", 8);\n        i0.ɵɵtext(19, \" Back\");\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.survey.name);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"Number of response: \", ctx.surveyResponses.length, \" \");\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngForOf\", ctx.survey.questions);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.surveyResponses);\n      }\n    },\n    dependencies: [i5.NgForOf, i4.RouterLink],\n    styles: [\"@media print {\\n        .navbar-logo[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%], .content[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%] {\\n            display: none;\\n        }\\n    }\"]\n  });\n  return ReportComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}